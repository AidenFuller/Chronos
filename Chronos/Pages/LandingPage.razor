@inject DegreeService degreeService
@inject CourseService courseService

<h1 class="heading-for-landing">Welcome to Chronos!</h1>
<div>
    <section>
        <h4 class="heading-for-landing">Please insert your information below:</h4>
        <hr />
        <br />
        <div class="form-alignment-center">
            <form action="login" method="POST">
                <div class="degree-div">
                    <h4>Choose your Degree</h4>
                    <BlazoredTypeahead SearchMethod="SearchDegrees" @bind-Value ="SelectedDegree" placeholder ="Please search for your degree...">
                        <SelectedTemplate Context="degree">
                            Bachelor Of @degree.Name
                        </SelectedTemplate>
                        <ResultTemplate Context="degree">
                            Bachelor Of @degree.Name
                        </ResultTemplate>
                    </BlazoredTypeahead>
                </div>
                <div class="semester-div">
                    <h4>Choose your semester</h4>
                    <select name="semester" class="semester-selection">
                        <option value=""> Select a Semester Type</option>
                        <option value="Semester">Semester 1/2</option>
                        <option value="Part Time">Part Time Semester</option>
                        <option value="Trimester">Trimester</option>
                        <option value="SemesterWithAdditional">Semester 1/2 but willing to do Winter/Summer courses.</option>
                    </select>
                </div>
                <br />

                <h4>What campuses are you able to attend?</h4>
                <div class="checklistColumns">
                    <input type="checkbox" id="Callaghan" name="Callaghan" value="Callaghan" />
                    <label for="Callaghan">Callaghan Campus</label><br />
                    <input type="checkbox" id="Newcastle" name="Newcastle" value="Newcastle" />
                    <label for="Newcastle">Newcastle Campus</label><br />
                    <input type="checkbox" id="Ourimbah" name="Ourimbah" value="Ourimbah" />
                    <label for="Ourimbah">Ourimbah Campus</label><br />
                    <input type="checkbox" id="Port Macquarie" name="Port Macquarie" value="Port Macquarie" />
                    <label for="Port Macquarie">Port Macquarie Campus</label><br />
                    <input type="checkbox" id="Signapore" name="Signapore" value="Signapore" />
                    <label for="Signapore">Signapore Campus</label><br />
                    <input type="checkbox" id="Sydney" name="Sydney" value="Sydney" />
                    <label for="Sydney">Sydney Campus</label><br />
                    <input type="checkbox" id="Online" name="Online" value="Online" />
                    <label for="Online">Online Campus</label><br />
                </div>
            </form>
            <br />
            <h4>Please insert the courses you have completed here. </h4>
            <BlazoredTypeahead SearchMethod="SearchCourses"
                               @bind-Values="SelectedCourse"
                               Disabled="IsItDisabled"
                               EnableDropDown="true"
                               placeholder="Please enter a course...">
                <SelectedTemplate Context="course">
                    @course.CourseCode (@course.Name)
                </SelectedTemplate>
                <ResultTemplate Context="course">
                    @course.CourseCode (@course.Name)
                </ResultTemplate>
            </BlazoredTypeahead>

            <!--<button @onclick="@(() => IsItDisabled = !IsItDisabled)">@(IsItDisabled ? "Enable" : "Disable")</button>-->
            <input type="submit" value ="Submit">
        </div>
    </section>
</div>
<hr />
<div class="center-button">
    <button class="button-for-admin" @onclick="ToggleAdminLogin">Admin Login</button>
</div>
<div>
    <section style="display:@ShowAdminLogin">
        <h4 class="heading-for-landing">Please login below. (IN WORK)</h4>
        <hr />
        <div class="login-center">
            <form action="login" method="POST">
                <label class="login-box-ui" for="username">Username: </label>
                <input type="text" id="username" name="username" />
                <label class="login-box-ui" for="password">Password: </label>
                <input type="password" id="password" name="password" />
                <hr />
                <input id="btn" type="submit" value="Login" name="button" />
                <input id="btn" type="reset" value="Reset" />
            </form>
        </div>
        <hr />
    </section>
</div>
<div class="additional-information">
    <h4>Information regarding this Project</h4>
    <p>You can do this!</p>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        Degrees = await degreeService.GetAllDegreesAsync(); //Grabs all the degrees from the database.
        Courses = await courseService.GetAllCoursesAsync();
    }

    protected IEnumerable<Degree>  Degrees { get; set; }
    protected IEnumerable<Course> Courses { get; set; }
    private async Task<IEnumerable<Course>> SearchCourses(string search)
    {
        return await Task.FromResult(Courses.Where(x => x.CourseCode.ToLower().Contains(search.ToLower())).ToList());
    }

    private async Task<IEnumerable<Degree>> SearchDegrees(string search)
    {
        return await Task.FromResult(Degrees.Where(x => x.Name.ToLower().Contains(search.ToLower())).ToList());
    }

    private string ShowAdminLogin => IsAdminLoginThere ? "block" : "none";
    private String Username;
    private Degree SelectedDegree;
    private IList<Course> SelectedCourse;
    private bool IsItDisabled;
    private bool IsAdminLoginThere = false;

    //private String Password;


    private void ToggleAdminLogin()
    {
        IsAdminLoginThere = !IsAdminLoginThere;
    }

}
